---
app: crank
title: Demo zellij-backed TUI navbar for agents
priority: 3
status: open
autopilot: true
coding_agent: opencode
created: 2026-01-04
---

## Intent
Create a demo that proves we can run multiple agent CLIs inside zellij while
showing a minimal custom TUI outside zellij (navbar + hotkeys). This is the
first step toward a richer zellij-backed UI.

## Spec
- Add `crank demo "<prompt>"`.
- Demo behavior:
  - Spawns a new zellij session with three panes: opencode, claude, codex.
  - Each pane starts its agent with the provided prompt and a shared work dir.
  - Runs a separate ratatui-based TUI (outside zellij) with a top navbar:
    `opencode | claude | codex`.
  - Hotkeys to cycle between agents and show the selected pane output below.
- Avoid WASM plugins; prefer zellij CLI / IPC hooks.
- Define a minimal zellij control layer in code:
  - Start session + panes and capture their pane ids.
  - Send input to a pane and capture a snapshot of its output.
- Provide a small README-style doc block or help output for the demo command.

### Acceptable Output
- `crank demo "<prompt>"` launches a zellij session plus the custom TUI.
- The TUI can switch between agent panes and shows their output snapshots.
- Agents run concurrently and receive the initial prompt.
